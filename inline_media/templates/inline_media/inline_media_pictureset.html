{% load i18n thumbnail %}

{% if class == "inline_mini_left" or class == "inline_mini_right" %}
<div id="{{ object.slug }}" class="inline {{ class }}" style="width:100px">
  <div class="{% if object.pictures.count == 2 %}pictureset2{% else %}{% if object.pictures.count > 2 %}pictureset3{% else %}pictureset1{% endif %}{% endif %}">
    {% thumbnail object.cover.picture "80x80" crop="center" as im %}
    <a href="{{ object.cover.picture.url }}" rel="pictureset[{{ object.slug }}]" title="{{ object.cover.description }}"><img src="{{ im.url }}" alt="{{ object.cover.title }}" class="picture"></a>
    {% endthumbnail %}

    {% for item in object.pictures.all %}
    {% ifnotequal item.picture object.cover.picture %}
    {% thumbnail item.picture "80x80" crop="center" as im %}
    <a href="{{ item.picture.url }}" rel="pictureset[{{ object.slug }}]" 
       title="{{ item.description }}">
      <img src="{{ im.url }}" alt="{{ item.title }}" class="picture">
    </a>
    {% endthumbnail %}
    {% endifnotequal %}
    {% endfor %}
  </div>
</div>
{% else %}

{% if class == "inline_small_left" or class == "inline_small_right" %}
<div id="{{ object.slug }}" class="inline {{ class }}" style="width:170px">
  <div class="{% if object.pictures.count == 2 %}pictureset2{% else %}{% if object.pictures.count > 2 %}pictureset3{% else %}pictureset1{% endif %}{% endif %}">
    {% thumbnail object.cover.picture "150x150" crop="center" as im %}
    <a href="{{ object.cover.picture.url }}" rel="pictureset[{{ object.slug }}]" title="{{ object.cover.description }}"><img src="{{ im.url }}" alt="{{ object.cover.title }}" class="picture"></a>
    {% endthumbnail %}

    {% for item in object.pictures.all %}
    {% ifnotequal item.picture object.cover.picture %}
    {% thumbnail item.picture "150x150" crop="center" as im %}
    <a href="{{ item.picture.url }}" rel="pictureset[{{ object.slug }}]" 
       title="{{ item.description }}">
      <img src="{{ im.url }}" alt="{{ item.title }}" class="picture">
    </a>
    {% endthumbnail %}
    {% endifnotequal %}
    {% endfor %}
  </div>
  <p class="inline_description">{{ object.description|safe }}</p>
  <p class="inline_counter">{% with count=object.pictures.count %}[{% if object.cover not in object.pictures.all %}{{ count|add:"1" }}{% else %}{{ count }}{% endif %} {% ifequal count 1 %}{% trans "picture" %}{% else %}{% trans "pictures" %}{% endifequal %}]{% endwith %}</p>
</div>
{% else %}

{% if class == "inline_medium_left" or class == "inline_medium_right" %}
<div id="{{ object.slug }}" class="inline {{ class }}" style="width:220px">
  <div class="{% if object.pictures.count == 2 %}pictureset2{% else %}{% if object.pictures.count > 2 %}pictureset3{% else %}pictureset1{% endif %}{% endif %}">
    {% thumbnail object.cover.picture "200x200" crop="center" as im %}
    <a href="{{ object.cover.picture.url }}" rel="pictureset[{{ object.slug }}]" title="{{ object.cover.description }}"><img src="{{ im.url }}" alt="{{ object.cover.title }}" class="picture"></a>
    {% endthumbnail %}

    {% for item in object.pictures.all %}
    {% ifnotequal item.picture object.cover.picture %}
    {% thumbnail item.picture "200x200" crop="center" as im %}
    <a href="{{ item.picture.url }}" rel="pictureset[{{ object.slug }}]" 
       title="{{ item.description }}">
      <img src="{{ im.url }}" alt="{{ item.title }}" class="picture">
    </a>
    {% endthumbnail %}
    {% endifnotequal %}
    {% endfor %}
  </div>
  <p class="inline_description">{{ object.description|safe }}</p>
  <p class="inline_counter">{% with count=object.pictures.count %}[{% if object.cover not in object.pictures.all %}{{ count|add:"1" }}{% else %}{{ count }}{% endif %} {% ifequal count 1 %}{% trans "picture" %}{% else %}{% trans "pictures" %}{% endifequal %}]{% endwith %}</p>
</div>

{% else %}
{% if class == "inline_large_left" or class == "inline_large_right" %}
<div id="{{ object.slug }}" class="inline {{ class }}" style="width:270px">
  <div class="{% if object.pictures.count == 2 %}pictureset2{% else %}{% if object.pictures.count > 2 %}pictureset3{% else %}pictureset1{% endif %}{% endif %}">
    {% thumbnail object.cover.picture "250x250" crop="center" as im %}
    <a href="{{ object.cover.picture.url }}" rel="pictureset[{{ object.slug }}]" title="{{ object.cover.description }}"><img src="{{ im.url }}" alt="{{ object.cover.title }}" class="picture"></a>
    {% endthumbnail %}

    {% for item in object.pictures.all %}
    {% ifnotequal item.picture object.cover.picture %}
    {% thumbnail item.picture "250x250" crop="center" as im %}
    <a href="{{ item.picture.url }}" rel="pictureset[{{ object.slug }}]" 
       title="{{ item.description }}">
      <img src="{{ im.url }}" alt="{{ item.title }}" class="picture">
    </a>
    {% endthumbnail %}
    {% endifnotequal %}
    {% endfor %}
  </div>
  <p class="inline_description">{{ object.description|safe }}</p>
  <p class="inline_counter">{% with count=object.pictures.count %}[{% if object.cover not in object.pictures.all %}{{ count|add:"1" }}{% else %}{{ count }}{% endif %} {% ifequal count 1 %}{% trans "picture" %}{% else %}{% trans "pictures" %}{% endifequal %}]{% endwith %}</p>
</div>

{% else %}
<div id="{{ object.slug }}" class="inline {{ class }}" style="width:400px">
  <div class="{% if object.pictures.count == 2 %}pictureset2{% else %}{% if object.pictures.count > 2 %}pictureset3{% else %}pictureset1{% endif %}{% endif %}">
    {% thumbnail object.cover.picture "380x280" crop="center" as im %}
    <a href="{{ object.cover.picture.url }}" rel="pictureset[{{ object.slug }}]" title="{{ object.cover.description }}"><img src="{{ im.url }}" alt="{{ object.cover.title }}" class="picture"></a>
    {% endthumbnail %}

    {% for item in object.pictures.all %}
    {% ifnotequal item.picture object.cover.picture %}
    {% thumbnail item.picture "380x280" crop="center" as im %}
    <a href="{{ item.picture.url }}" rel="pictureset[{{ object.slug }}]" 
       title="{{ item.description }}">
      <img src="{{ im.url }}" alt="{{ item.title }}" class="picture">
    </a>
    {% endthumbnail %}
    {% endifnotequal %}
    {% endfor %}
  </div>
  <p class="inline_description">{{ object.description|safe }}</p>
  <p class="inline_counter">{% with count=object.pictures.count %}[{% if object.cover not in object.pictures.all %}{{ count|add:"1" }}{% else %}{{ count }}{% endif %} {% ifequal count 1 %}{% trans "picture" %}{% else %}{% trans "pictures" %}{% endifequal %}]{% endwith %}</p>
</div>

{% endif %}
{% endif %}
{% endif %}
{% endif %}

<script type="text/javascript">
  $(document).ready(function() {
    {% if object.pictures.count == 2 %}
      fanPictureSet2("{{ object.slug }}");
    {% else %}
      fanPictureSet3("{{ object.slug }}");
    {% endif %}
  });
</script>
